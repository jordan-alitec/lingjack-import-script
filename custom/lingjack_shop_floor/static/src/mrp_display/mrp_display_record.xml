<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <!-- Extend MrpDisplayRecord template to add schedule dates -->
    <t t-inherit="mrp_workorder.MrpDisplayRecord" t-inherit-mode="extension">
        <!-- Add schedule dates after the card-title for workorders -->
        <xpath expr="//div[@class='card-title d-flex justify-content-between align-items-center']" position="after">
                         <h6 t-if="props.record.resModel=='mrp.workorder'">
                        <t t-set="production_name" t-value="props.record.data.production_id[1]"/>
                        <div t-esc="production_name"/>
                    </h6>
            <div class="schedule-info px-3 py-2 bg-light border-bottom" t-if="props.record.resModel=='mrp.workorder'">
                <div class="d-flex justify-content-between align-items-center text-muted small">
                    <div class="d-flex align-items-center">
                        <i class="fa fa-calendar-o me-2"></i>
                        <span class="fw-bold">Schedule:</span>
                    </div>
                    <div class="schedule-dates">
                        <span t-if="props.record.data.date_start" class="me-3">
                            <i class="fa fa-play-circle text-success me-1"></i>
                            <span class="fw-bold">Start:</span>
                            <span t-esc="formatScheduleDate(props.record.data.date_start)"></span>
                        </span>
                
                        <span t-if="props.record.data.date_start and props.record.data.date_finished" class="me-3">
                            <i class="fa fa-stop-circle text-danger me-1"></i>
                            <span class="fw-bold">End:</span>
                            <span t-esc="formatScheduleDate(props.record.data.date_finished)"></span>
                        </span>

                        <span t-if="!props.record.data.date_start and !props.record.data.duration_expected" class="text-warning">
                            <i class="fa fa-exclamation-triangle me-1"></i>
                            Not scheduled
                        </span>
                    </div>

                </div>

            </div>
        </xpath>
        
        <!-- Add schedule dates after the card-title for production orders -->
        <xpath expr="//div[@class='card-title d-flex justify-content-between align-items-center']" position="after">
            <div class="schedule-info px-3 py-2 bg-light border-bottom" t-if="props.record.resModel=='mrp.production'">
                <div class="d-flex justify-content-between align-items-center text-muted small">
                    <div class="d-flex align-items-center">
                        <i class="fa fa-calendar-o me-2"></i>
                        <span class="fw-bold">Production Schedule:</span>
                    </div>
                    <div class="schedule-dates">
                        <span t-if="props.record.data.date_start" class="me-3">
                            <i class="fa fa-play-circle text-success me-1"></i>
                            <span class="fw-bold">Start:</span>
                            <span t-esc="formatScheduleDate(props.record.data.date_start)"></span>
                        </span>
                        <span t-if="props.record.data.date_finished" class="me-3">
                            <i class="fa fa-flag text-warning me-1"></i>
                            <span class="fw-bold" t-if="['done', 'cancel'].includes(props.record.data.state)">Completed:</span>
                            <span class="fw-bold" t-else="">Deadline:</span>
                            <span t-esc="formatScheduleDate(props.record.data.date_finished)"></span>
                        </span>
                        <span t-if="!props.record.data.date_start and !props.record.data.date_deadline" class="text-warning">
                            <i class="fa fa-exclamation-triangle me-1"></i>
                            Not scheduled
                        </span>
                    </div>
                </div>
            </div>
        </xpath>
    </t>
</templates> 